#!/usr/bin/env bash

# https://github.com/garybernhardt/dotfiles/blob/master/bin/git-churn
#
# Written by Corey Haines
# Scriptified by Gary Bernhardt
#
# Show churn for whole repo:
# $ git churn
#
# Show churn for specific directories:
# $ git churn app lib
#
# Show churn for a time range:
# $ git churn --since='1 month ago'
#
# (These are all standard arguments to `git log`.)

set -o errexit -o pipefail

git log --all --find-renames --find-copies --name-only --format='format:' "$@" \
	| sort \
	| grep -v '^$' \
	| uniq -c \
	| sort -n \
	| awk 'BEGIN {print "count\tfile"} {print $1 "\t" $2}'
