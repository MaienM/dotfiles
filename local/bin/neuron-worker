#!/usr/bin/env bash

dir="${1:-$PWD}"
if ! [ -d "$dir" ]; then
	echo >&2 "'$dir' is not a directory."
	exit 1
fi

hash="$(md5sum <<<"$dir" | cut -c1-32)"
containername="neuron-$hash"

exec docker-worker-start \
	sridca/neuron \
	--name "$containername" \
	--user "$(id -u):$(id -g)" \
	--volume "$dir:/zettelkasten"
